<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 THREDDS and ERDDAP | DataExtraction.utf8</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.20.6 and GitBook 2.6.7" />

  <meta property="og:title" content="1 THREDDS and ERDDAP | DataExtraction.utf8" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 THREDDS and ERDDAP | DataExtraction.utf8" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="week-6-assignment-extract-data-in-r-via-thredds-and-erddap.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">GEOG473-673 Open-sourced Environmental Computing</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="thredds-and-erddap.html"><a href="thredds-and-erddap.html"><i class="fa fa-check"></i><b>1</b> THREDDS and ERDDAP</a><ul>
<li class="chapter" data-level="1.1" data-path="thredds-and-erddap.html"><a href="thredds-and-erddap.html#thredds"><i class="fa fa-check"></i><b>1.1</b> THREDDS</a></li>
<li class="chapter" data-level="1.2" data-path="thredds-and-erddap.html"><a href="thredds-and-erddap.html#erddap"><i class="fa fa-check"></i><b>1.2</b> ERDDAP</a><ul>
<li class="chapter" data-level="1.2.1" data-path="thredds-and-erddap.html"><a href="thredds-and-erddap.html#finding-the-data-you-want"><i class="fa fa-check"></i><b>1.2.1</b> Finding the Data You Want</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="week-6-assignment-extract-data-in-r-via-thredds-and-erddap.html"><a href="week-6-assignment-extract-data-in-r-via-thredds-and-erddap.html"><i class="fa fa-check"></i><b>2</b> Week 6 Assignment - Extract Data in R via THREDDS and ERDDAP</a><ul>
<li class="chapter" data-level="2.1" data-path="week-6-assignment-extract-data-in-r-via-thredds-and-erddap.html"><a href="week-6-assignment-extract-data-in-r-via-thredds-and-erddap.html#extra-credit---2-points"><i class="fa fa-check"></i><b>2.1</b> Extra Credit - 2 Points</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">James Simkins</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="thredds-and-erddap" class="section level1">
<h1><span class="header-section-number">1</span> THREDDS and ERDDAP</h1>
<p><img src="../documents/images/erddap.png" width="60%" style="display: block; margin: auto;" /></p>
<p>Up to this point, we’ve been using locally downloaded datasets derived from the course datasets folder. We downloaded these files in bulk or individually like so…</p>
<p><code>download.file("https://github.com/jsimkins2/geog473-673/tree/master/datasets/TreeData.csv", destfile = "/Users/james/Downloads/TreeData.csv" , mode='wb')</code></p>
<p>While Github is excellent for code, it’s not a cloud service for datasets. THREDDS and ERDDAP are the future of environmental data repositories.</p>
<div id="thredds" class="section level2">
<h2><span class="header-section-number">1.1</span> THREDDS</h2>
<p>THREDDS (Thematic Realtime Environmental Distributed Data Services) is an efficient way to extract specific areas or time periods of a dataset. For example, if you’re studying 2000-2020 water temperatures of the Delaware Bay, you don’t necessarily want a water temperature dataset covering the Atlantic Ocean from 1960-2020. It’s a waste of time to have to download, store, and process all of that data just to sub-select the Delaware Bay from 2000-2020. THREDDS makes it possible to download your desired subset from the get-go, saving you time and hard-drive space.</p>
<p>Here are some NASA/NOAA/UDEL THREDDS servers:</p>
<ol style="list-style-type: decimal">
<li><a href="https://thredds.jpl.nasa.gov/thredds/catalog.html" class="uri">https://thredds.jpl.nasa.gov/thredds/catalog.html</a> - NASA Jet Propulsion Labratory</li>
<li><a href="https://thredds.daac.ornl.gov/thredds/catalog.html" class="uri">https://thredds.daac.ornl.gov/thredds/catalog.html</a> - Oak Ridge National Lab</li>
<li><a href="https://pae-paha.pacioos.hawaii.edu/thredds/catalog.html" class="uri">https://pae-paha.pacioos.hawaii.edu/thredds/catalog.html</a> - Pacific Islands Ocean Observing System</li>
<li><a href="http://thredds.demac.udel.edu/thredds/catalog.html" class="uri">http://thredds.demac.udel.edu/thredds/catalog.html</a> - UDEL DEMAC</li>
<li><a href="http://basin.ceoe.udel.edu/thredds/catalog.html" class="uri">http://basin.ceoe.udel.edu/thredds/catalog.html</a> - UDEL Satellite Receiving Station</li>
<li><a href="http://www.smast.umassd.edu:8080/thredds/catalog.html" class="uri">http://www.smast.umassd.edu:8080/thredds/catalog.html</a> - UMASS Thredds</li>
</ol>
<p>If you have a dataset or type of data you’re interested in, google search it with <strong>thredds</strong> or <strong>thredds server</strong> after it.</p>
<p>Today we’ll use UDEL’s Satellite Receiving Station THREDDS (#5 on the list). It’s located at this URL - <a href="http://basin.ceoe.udel.edu/thredds/catalog.html" class="uri">http://basin.ceoe.udel.edu/thredds/catalog.html</a></p>
<p>Here’s what that looks like:
<img src="../documents/images/basin_thredds.png" width="60%" style="display: block; margin: auto;" /></p>
<p>If we click on <code>GOES-R SST</code>, we see we have some different avenues for data extraction.</p>
<p><img src="../documents/images/basin_goesSST.png" width="60%" style="display: block; margin: auto;" /></p>
<p>OPeNDAP (Open-source Project for a Network Data Access Protocol) is a great way to subselect the data. Opendap offers html files of the data (BAD IDEA, THIS WILL CRASH YOUR BROWSER) or netCDF files of the data (great idea)</p>
<p><img src="../documents/images/basin_opendap.png" width="60%" style="display: block; margin: auto;" /></p>
<p>Now you can use this page to download subset datasets, or we can make this really easy and use R to accomplish that task. This is a high temporal resolution dataset, so let’s say we want Delaware Bay data from July 14 - July 16, 2019. All we need to make this happen is the url of the opendap page - <a href="http://basin.ceoe.udel.edu/thredds/dodsC/GOESJPLSST.nc.html" class="uri">http://basin.ceoe.udel.edu/thredds/dodsC/GOESJPLSST.nc.html</a> - and the <code>ncdf4</code> package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="thredds-and-erddap.html#cb1-1"></a><span class="kw">library</span>(ncdf4)</span>
<span id="cb1-2"><a href="thredds-and-erddap.html#cb1-2"></a>goes.nc =<span class="st"> </span><span class="kw">nc_open</span>(<span class="st">&quot;http://basin.ceoe.udel.edu/thredds/dodsC/GOESJPLSST.nc&quot;</span>)</span>
<span id="cb1-3"><a href="thredds-and-erddap.html#cb1-3"></a>goes.nc</span></code></pre></div>
<pre><code>## File http://basin.ceoe.udel.edu/thredds/dodsC/GOESJPLSST.nc (NC_FORMAT_CLASSIC):
## 
##      8 variables (excluding dimension variables):
##         float projection[]   
##             proj4_string: +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
##             epsg_code: 4326
##         float sea_surface_temperature[longitude,latitude,time]   
##             long_name: sea surface sub-skin temperature
##             standard_name: sea_surface_subskin_temperature
##             comment: SST obtained by regression with buoy measurements, sensitive to skin SST. Further information at (Petrenko et al., JGR, 2014; doi:10.1002/2013JD020637)
##             units: kelvin
##         float quality_level[longitude,latitude,time]   
##             long_name: quality level of SST pixel
##             flag_values: 1
##              flag_values: 2
##              flag_values: 3
##              flag_values: 4
##              flag_values: 5
##             flag_meanings: no_data bad_data not_used not_used not_used best_quality
##         float dt_analysis[longitude,latitude,time]   
##             long_name: deviation from SST reference
##             comment: Deviation from reference SST, i.e., dt_analysis = SST - reference SST
##             units: kelvin
##         float satellite_zenith_angle[longitude,latitude,time]   
##             long_name: satellite zenith angle
##             comment: satellite zenith angle
##             units: degrees
##         float sses_bias[longitude,latitude,time]   
##             long_name: SSES bias estimate
##             comment: Bias is derived against Piecewise Regression SST produced by local regressions with buoys. Subtracting sses_bias from sea_surface_temperature produces more accurate estimate of SST at the depth of buoys. Further information at (Petrenko et al., JTECH, 2016; doi:10.1175/JTECH-D-15-0166.1)
##             units: kelvin
##         float sses_standard_deviation[longitude,latitude,time]   
##             long_name: SSES standard deviation
##             units: kelvin
##             comment: Standard deviation of sea_surface_temperature from SST measured by drifting buoys. Further information at (Petrenko et al., JTECH, 2016; doi:10.1175/JTECH-D-15-0166.1)
##         float wind_speed[longitude,latitude,time]   
##             long_name: wind speed
##             units: m s-1
##             comment: Typically represents surface winds (10 meters above the sea surface)
## 
##      3 dimensions:
##         latitude  Size:1800
##             standard_name: latitude
##             units: degrees_north
##         longitude  Size:2500
##             standard_name: longitude
##             units: degrees_east
##         time  Size:26373
##             standard_name: time
##             long_name: EPOCH Time
##             units: seconds since 1970-01-01T00:00:00Z
## 
##     9 global attributes:
##         _NCProperties: version=2,netcdf=4.7.1,hdf5=1.10.5
##         creator_name: James Simkins
##         creator_email: simkins@udel.edu
##         institution: University of Delaware Ocean Exploration, Remote Sensing and Biogeography Group (ORB)
##         url: http://orb.ceoe.udel.edu/
##         source: NOAA/NESDIS/STAR GHRSST- http://www.star.nesdis.noaa.gov - SST 
##         groundstation: University of Delaware, Newark, Center for Remote Sensing
##         summary: NOAA/NESDIS/STAR GHRSST GOES16 SST product, fit to UDel ORB lab NW Atlantic extent, reprojected to EPSG:4326.
##         acknowledgement: These data were provided by Group for High Resolution Sea Surface Temperature (GHRSST) and the National Oceanic and Atmospheric Administration (NOAA)</code></pre>
<p>Just with that one line of code, we’ve opened a connection with the GOES-R dataset on the THREDDS server. Printing the netcdf dataset provides some metadata info. Let’s use this metadata and extract the time period / spatial extent that we want.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="thredds-and-erddap.html#cb3-1"></a><span class="co"># print out the names of the variables in our dataset</span></span>
<span id="cb3-2"><a href="thredds-and-erddap.html#cb3-2"></a><span class="kw">names</span>(goes.nc<span class="op">$</span>var)</span></code></pre></div>
<pre><code>## [1] &quot;projection&quot;              &quot;sea_surface_temperature&quot;
## [3] &quot;quality_level&quot;           &quot;dt_analysis&quot;            
## [5] &quot;satellite_zenith_angle&quot;  &quot;sses_bias&quot;              
## [7] &quot;sses_standard_deviation&quot; &quot;wind_speed&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="thredds-and-erddap.html#cb5-1"></a><span class="co"># how is the time stored?</span></span>
<span id="cb5-2"><a href="thredds-and-erddap.html#cb5-2"></a>goes.nc<span class="op">$</span>dim<span class="op">$</span>time<span class="op">$</span>units</span></code></pre></div>
<pre><code>## [1] &quot;seconds since 1970-01-01T00:00:00Z&quot;</code></pre>
<p>Seconds since 1970-01-01 is referred to as <strong>EPOCH time</strong>. Basically, this datetime is considered the inception of the internet. Computers are very good at storing information in this format and this is why we use this. Let’s take out the last value -</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="thredds-and-erddap.html#cb7-1"></a>lastVal =<span class="st"> </span><span class="kw">length</span>(goes.nc<span class="op">$</span>dim<span class="op">$</span>time<span class="op">$</span>vals)</span>
<span id="cb7-2"><a href="thredds-and-erddap.html#cb7-2"></a>lastVal</span></code></pre></div>
<pre><code>## [1] 26373</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="thredds-and-erddap.html#cb9-1"></a>epoch_val =<span class="st"> </span>goes.nc<span class="op">$</span>dim<span class="op">$</span>time<span class="op">$</span>vals[lastVal]</span></code></pre></div>
<p>There you go, that’s an EPOCH time value. Let’s convert it to a human timestamp…</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="thredds-and-erddap.html#cb10-1"></a>human_time =<span class="st"> </span><span class="kw">as.POSIXct</span>(epoch_val, <span class="dt">origin=</span><span class="st">&quot;1970-01-01&quot;</span>)</span>
<span id="cb10-2"><a href="thredds-and-erddap.html#cb10-2"></a>human_time</span></code></pre></div>
<pre><code>## [1] &quot;2021-01-24 12:00:00 EST&quot;</code></pre>
<p><code>as.POSIXct</code> is a datetime package in R. It is a gold standard and you’ll see it as you gain more experience in playing with datetime conversions. You can also use <code>anytime</code> package.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="thredds-and-erddap.html#cb12-1"></a><span class="kw">library</span>(anytime)</span>
<span id="cb12-2"><a href="thredds-and-erddap.html#cb12-2"></a><span class="kw">anytime</span>(epoch_val)</span></code></pre></div>
<pre><code>## [1] &quot;2021-01-24 12:00:00 EST&quot;</code></pre>
<p>At this point, all we have to do is convert our human dates to EPOCH so we can extract the data. In order to do this all we need to do is convert a datetime object to a numeric. R handles it for us…</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="thredds-and-erddap.html#cb14-1"></a>start_time =<span class="st"> &quot;2019-07-14&quot;</span> <span class="co"># year dash month dash day</span></span>
<span id="cb14-2"><a href="thredds-and-erddap.html#cb14-2"></a>epoch_start_time =<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">as.POSIXct</span>(start_time, <span class="dt">format=</span><span class="st">&quot;%Y-%m-%d&quot;</span>)) <span class="co"># %Y-%m-%d is telling the computer the format of our datestring is year dash month dash day</span></span>
<span id="cb14-3"><a href="thredds-and-erddap.html#cb14-3"></a></span>
<span id="cb14-4"><a href="thredds-and-erddap.html#cb14-4"></a>end_time =<span class="st"> &quot;2019-07-16&quot;</span> <span class="co"># year dash month dash day</span></span>
<span id="cb14-5"><a href="thredds-and-erddap.html#cb14-5"></a>epoch_end_time =<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">as.POSIXct</span>(end_time, <span class="dt">format=</span><span class="st">&quot;%Y-%m-%d&quot;</span>)) <span class="co"># %Y-%m-%d is telling the computer the format of our datestring is year dash month dash day</span></span></code></pre></div>
<p>We have the time values converted to the format of the dataset, but now we need to find the index - i.e. where that value lies in the dataset. We can find this using this code…</p>
<p><code>which.min(abs(array - value))</code></p>
<p>Which reads as -</p>
<ul>
<li><code>which.min()</code> - which value is the minimum of this array</li>
<li><code>abs()</code> - absolute value - we take the absolute value because negative numbers confuse the math</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="thredds-and-erddap.html#cb15-1"></a>index_start_time =<span class="st"> </span><span class="kw">which.min</span>(<span class="kw">abs</span>(goes.nc<span class="op">$</span>dim<span class="op">$</span>time<span class="op">$</span>vals <span class="op">-</span><span class="st"> </span>epoch_start_time))</span>
<span id="cb15-2"><a href="thredds-and-erddap.html#cb15-2"></a>index_start_time</span></code></pre></div>
<pre><code>## [1] 13384</code></pre>
<p>That’s the index! This is just a big matching game essentially.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="thredds-and-erddap.html#cb17-1"></a>goes.nc<span class="op">$</span>dim<span class="op">$</span>time<span class="op">$</span>vals[index_start_time]</span></code></pre></div>
<pre><code>## [1] 1563076800</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="thredds-and-erddap.html#cb19-1"></a>epoch_start_time</span></code></pre></div>
<pre><code>## [1] 1563076800</code></pre>
<p>Alright, we have our start time index! What about the latitudes and longitudes? We’ll need to find the index of the lat/lon grid we want. Delaware bay is approximately between -75.8 W, -74.7 W, 38.3 N, and 40 N.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="thredds-and-erddap.html#cb21-1"></a><span class="co"># print out a few longitude values - notice that the entire dataset is on this grid right here. </span></span>
<span id="cb21-2"><a href="thredds-and-erddap.html#cb21-2"></a><span class="kw">head</span>(goes.nc<span class="op">$</span>dim<span class="op">$</span>lon<span class="op">$</span>vals)</span></code></pre></div>
<pre><code>## [1] -99.99001 -99.97000 -99.95000 -99.93000 -99.91000 -99.89000</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="thredds-and-erddap.html#cb23-1"></a><span class="co"># notice how we extract those values using indexing - the 100th value </span></span>
<span id="cb23-2"><a href="thredds-and-erddap.html#cb23-2"></a>goes.nc<span class="op">$</span>dim<span class="op">$</span>lon<span class="op">$</span>vals[<span class="dv">100</span>]</span></code></pre></div>
<pre><code>## [1] -98.01</code></pre>
<p>The 100th lon value is -98.20815. Aka, a lon index of 100 returns -98.20815.</p>
<p>So…which value is the minimum of the absolute value of the array of values minus the specific value? Let’s plug it in…</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="thredds-and-erddap.html#cb25-1"></a>west_lon =<span class="st"> </span><span class="fl">-76.8</span></span>
<span id="cb25-2"><a href="thredds-and-erddap.html#cb25-2"></a>index_west_lon =<span class="st"> </span><span class="kw">which.min</span>(<span class="kw">abs</span>(goes.nc<span class="op">$</span>dim<span class="op">$</span>longitude<span class="op">$</span>vals <span class="op">-</span><span class="st"> </span>west_lon))</span>
<span id="cb25-3"><a href="thredds-and-erddap.html#cb25-3"></a>index_west_lon</span></code></pre></div>
<pre><code>## [1] 1161</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="thredds-and-erddap.html#cb27-1"></a>goes.nc<span class="op">$</span>dim<span class="op">$</span>longitude<span class="op">$</span>vals[index_west_lon]</span></code></pre></div>
<pre><code>## [1] -76.79</code></pre>
<p>So our desired <code>west_lon</code> is <code>-75.8</code>, and the closest value within our longitude array is <code>-75.79815</code>. Not bad…let’s run the rest.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="thredds-and-erddap.html#cb29-1"></a>east_lon =<span class="st"> </span><span class="fl">-73.7</span></span>
<span id="cb29-2"><a href="thredds-and-erddap.html#cb29-2"></a>index_east_lon =<span class="st"> </span><span class="kw">which.min</span>(<span class="kw">abs</span>(goes.nc<span class="op">$</span>dim<span class="op">$</span>longitude<span class="op">$</span>vals <span class="op">-</span><span class="st"> </span>east_lon))</span>
<span id="cb29-3"><a href="thredds-and-erddap.html#cb29-3"></a></span>
<span id="cb29-4"><a href="thredds-and-erddap.html#cb29-4"></a>north_lat =<span class="st"> </span><span class="dv">41</span></span>
<span id="cb29-5"><a href="thredds-and-erddap.html#cb29-5"></a>index_north_lat =<span class="st"> </span><span class="kw">which.min</span>(<span class="kw">abs</span>(goes.nc<span class="op">$</span>dim<span class="op">$</span>latitude<span class="op">$</span>vals <span class="op">-</span><span class="st"> </span>north_lat))</span>
<span id="cb29-6"><a href="thredds-and-erddap.html#cb29-6"></a>south_lat =<span class="st"> </span><span class="fl">37.3</span></span>
<span id="cb29-7"><a href="thredds-and-erddap.html#cb29-7"></a>index_south_lat =<span class="st"> </span><span class="kw">which.min</span>(<span class="kw">abs</span>(goes.nc<span class="op">$</span>dim<span class="op">$</span>latitude<span class="op">$</span>vals <span class="op">-</span><span class="st"> </span>south_lat))</span></code></pre></div>
<p>Everything is indexed! Now we can use these indexes to extract the exact data that we want via <code>ncvar_get</code> from the <code>ncdf4</code> package. We can enter in arguments named <code>start</code> and <code>count</code>. This tells <code>ncvar_get</code> at what space / time to <strong>start</strong> grabbing values. <code>count</code> tells <code>ncvar_get</code> how long to <code>count</code> in space / time. For example, if the resolution of our data is hourly and we start at <code>12:00:00</code> and the count is <code>4</code>, that means we grab data at <code>12:00:00 , 13:00:00 , 14:00:00 , 15:00:00 , 16:00:00</code>. The same goes for <code>lat</code> and <code>lon</code> - the count all depends on <strong>what resolution your data is in</strong>. If you have a spatial dataset at 5 degree resolution, each count will bring in another 5 degree lat/lon value.</p>
<p>At this point, we know our <code>start</code> values. At this point, we only have end values, not count values…Let’s figure those out</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="thredds-and-erddap.html#cb30-1"></a>time_count =<span class="st"> </span><span class="kw">which.min</span>(<span class="kw">abs</span>(goes.nc<span class="op">$</span>dim<span class="op">$</span>time<span class="op">$</span>vals <span class="op">-</span><span class="st"> </span>epoch_end_time)) <span class="op">-</span><span class="st"> </span><span class="kw">which.min</span>(<span class="kw">abs</span>(goes.nc<span class="op">$</span>dim<span class="op">$</span>time<span class="op">$</span>vals <span class="op">-</span><span class="st"> </span>epoch_start_time))</span>
<span id="cb30-2"><a href="thredds-and-erddap.html#cb30-2"></a>time_count</span></code></pre></div>
<pre><code>## [1] 48</code></pre>
<p>So, if we count <code>48</code> time values from the start_time of <code>2019-07-14</code>, we’ll arrive at the end_time of <code>2019-07-16</code>. Let’s do the same for our lat/lons.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="thredds-and-erddap.html#cb32-1"></a><span class="co"># latitude counts</span></span>
<span id="cb32-2"><a href="thredds-and-erddap.html#cb32-2"></a>lat_count =<span class="st"> </span><span class="kw">abs</span>(index_north_lat <span class="op">-</span><span class="st"> </span>index_south_lat)</span>
<span id="cb32-3"><a href="thredds-and-erddap.html#cb32-3"></a>lon_count =<span class="st"> </span><span class="kw">abs</span>(index_west_lon <span class="op">-</span><span class="st"> </span>index_east_lon)</span></code></pre></div>
<p>Why do we take the absolute value? Because sometimes data is stored backwards. We don’t care which way it’s stored, we just need a positive number to count up from the starting value. Longitude values are weird because many times they are stored as negative values if they’re west of the meridian. Latitude values are also negative if we go south of the equator.</p>
<p>Now we have our count values, we can proceed. Remember, here is what the <code>start</code> argument is looking for…via (<code>?ncvar_get</code>)</p>
<p><code>A vector of indices indicating where to start reading the passed values (beginning at 1). The length of this vector must equal the number of dimensions the variable has. Order is X-Y-Z-T (i.e., the time dimension is last). If not specified, reading starts at the beginning of the file (1,1,1,...).</code></p>
<p>So x is longitude, y is latitude, and t is time. Whichever value is lower between <code>index_west_lon</code> and <code>index_east_lon</code> is our <code>start</code> value, and vice versa for latitudes.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="thredds-and-erddap.html#cb33-1"></a>index_west_lon</span></code></pre></div>
<pre><code>## [1] 1161</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="thredds-and-erddap.html#cb35-1"></a>index_east_lon</span></code></pre></div>
<pre><code>## [1] 1316</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="thredds-and-erddap.html#cb37-1"></a>index_south_lat</span></code></pre></div>
<pre><code>## [1] 736</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="thredds-and-erddap.html#cb39-1"></a>index_north_lat</span></code></pre></div>
<pre><code>## [1] 551</code></pre>
<p>And here is what the <code>count</code> argument is looking for…</p>
<p><code>A vector of integers indicating the count of values to read along each dimension (order is X-Y-Z-T). The length of this vector must equal the number of dimensions the variable has. If not specified and the variable does NOT have an unlimited dimension, the entire variable is read. As a special case, the value "-1" indicates that all entries along that dimension should be read.</code></p>
<p>We already have our <code>count</code> values in place..let’s plug them in and run - note this will take a few seconds to run and even longer if you have poor internet connection. This is data being extracted through the internet in real time.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="thredds-and-erddap.html#cb41-1"></a><span class="co"># cool, let&#39;s grab sea_surface_temperature for Delaware Bay</span></span>
<span id="cb41-2"><a href="thredds-and-erddap.html#cb41-2"></a>sst.c &lt;-<span class="st"> </span><span class="kw">ncvar_get</span>(goes.nc, <span class="st">&quot;sea_surface_temperature&quot;</span>,<span class="dt">start =</span> <span class="kw">c</span>(index_west_lon,index_south_lat,index_start_time), </span>
<span id="cb41-3"><a href="thredds-and-erddap.html#cb41-3"></a>                   <span class="dt">count =</span> <span class="kw">c</span>(lon_count,lat_count,time_count))</span>
<span id="cb41-4"><a href="thredds-and-erddap.html#cb41-4"></a><span class="kw">dim</span>(sst.c)</span></code></pre></div>
<pre><code>## [1] 155 185  48</code></pre>
<p>And there is the data! It returns the raw data in the format we pulled it in - Lon, Lat, Time. We have a 2 dimensional array (lon x lat) with 48 time slices. Let’s convert one to raster and plot it really quickly.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="thredds-and-erddap.html#cb43-1"></a><span class="kw">library</span>(maptools) <span class="co"># also loads sp package</span></span></code></pre></div>
<pre><code>## Loading required package: sp</code></pre>
<pre><code>## Checking rgeos availability: TRUE</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="thredds-and-erddap.html#cb46-1"></a><span class="kw">library</span>(ncdf4)</span>
<span id="cb46-2"><a href="thredds-and-erddap.html#cb46-2"></a><span class="kw">library</span>(raster)</span>
<span id="cb46-3"><a href="thredds-and-erddap.html#cb46-3"></a><span class="kw">library</span>(rasterVis)</span></code></pre></div>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## Loading required package: latticeExtra</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="thredds-and-erddap.html#cb49-1"></a>arr.sst =<span class="st"> </span>sst.c[,,<span class="dv">4</span>]</span>
<span id="cb49-2"><a href="thredds-and-erddap.html#cb49-2"></a>arr.sst[arr.sst <span class="op">&lt;</span><span class="st"> </span><span class="dv">273</span>] =<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb49-3"><a href="thredds-and-erddap.html#cb49-3"></a>test.sst =<span class="st"> </span><span class="kw">raster</span>(<span class="dt">x =</span> arr.sst)</span>
<span id="cb49-4"><a href="thredds-and-erddap.html#cb49-4"></a>test.sst</span></code></pre></div>
<pre><code>## class      : RasterLayer 
## dimensions : 155, 185, 28675  (nrow, ncol, ncell)
## resolution : 0.005405405, 0.006451613  (x, y)
## extent     : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)
## crs        : NA 
## source     : memory
## names      : layer 
## values     : 298.63, 302.97  (min, max)</code></pre>
<p>What’s missing? Well we just gave it the raw data, we still need to plug in the extents! Also, we will need to plug in the CRS - luckily we know this data is in lat/lon because of how awesome this metadata is!</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="thredds-and-erddap.html#cb51-1"></a><span class="co"># we need to transpose and flip this dataset just like we did in week 4 of the R intro course</span></span>
<span id="cb51-2"><a href="thredds-and-erddap.html#cb51-2"></a><span class="co"># for some reason when we put the netcdf data into R raster the data is upside down and inside out so this is our way of fixing it </span></span>
<span id="cb51-3"><a href="thredds-and-erddap.html#cb51-3"></a>test.sst =<span class="st"> </span><span class="kw">t</span>(test.sst)</span>
<span id="cb51-4"><a href="thredds-and-erddap.html#cb51-4"></a>test.sst =<span class="st"> </span><span class="kw">flip</span>(test.sst, <span class="dv">2</span>)</span>
<span id="cb51-5"><a href="thredds-and-erddap.html#cb51-5"></a><span class="co"># define the projection</span></span>
<span id="cb51-6"><a href="thredds-and-erddap.html#cb51-6"></a>sst.crs =<span class="st"> </span><span class="kw">ncatt_get</span>(goes.nc, <span class="st">&quot;projection&quot;</span>)</span>
<span id="cb51-7"><a href="thredds-and-erddap.html#cb51-7"></a><span class="kw">extent</span>(test.sst) =<span class="st"> </span><span class="kw">c</span>(west_lon, east_lon, south_lat, north_lat)</span>
<span id="cb51-8"><a href="thredds-and-erddap.html#cb51-8"></a><span class="kw">crs</span>(test.sst) =<span class="st"> </span>sst.crs<span class="op">$</span>proj4_string</span></code></pre></div>
<pre><code>## Warning in showSRID(uprojargs, format = &quot;PROJ&quot;, multiline = &quot;NO&quot;): Discarded datum WGS_1984 in CRS definition,
##  but +towgs84= values preserved</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="thredds-and-erddap.html#cb53-1"></a><span class="co"># let&#39;s use levelplot to get this done</span></span>
<span id="cb53-2"><a href="thredds-and-erddap.html#cb53-2"></a>usa &lt;-<span class="st"> </span><span class="kw">getData</span>(<span class="st">&#39;GADM&#39;</span>, <span class="dt">country =</span> <span class="st">&#39;USA&#39;</span>, <span class="dt">level =</span> <span class="dv">1</span>)</span>
<span id="cb53-3"><a href="thredds-and-erddap.html#cb53-3"></a></span>
<span id="cb53-4"><a href="thredds-and-erddap.html#cb53-4"></a><span class="co"># Throw together the usa spatial polygons data frame</span></span>
<span id="cb53-5"><a href="thredds-and-erddap.html#cb53-5"></a>plt &lt;-<span class="st"> </span><span class="kw">levelplot</span>(test.sst, <span class="dt">margin=</span>F, <span class="dt">par.settings=</span>BuRdTheme,</span>
<span id="cb53-6"><a href="thredds-and-erddap.html#cb53-6"></a>       <span class="dt">main=</span><span class="st">&quot;GOES-R SST 07/14&quot;</span>)</span>
<span id="cb53-7"><a href="thredds-and-erddap.html#cb53-7"></a>plt <span class="op">+</span><span class="st"> </span><span class="kw">layer</span>(<span class="kw">sp.polygons</span>(usa, <span class="dt">col=</span><span class="st">&#39;black&#39;</span>, <span class="dt">lwd=</span><span class="fl">0.4</span>))</span></code></pre></div>
<p><img src="DataExtraction_files/figure-html/unnamed-chunk-21-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>Boom…There’s the data we wanted and we didn’t have to leave R to get it. We also saved a ton of time and hard drive space.</p>
</div>
<div id="erddap" class="section level2">
<h2><span class="header-section-number">1.2</span> ERDDAP</h2>
<p>THREDDS is very fast and great when you’re already familiar with a dataset. ERDDAP, on the other hand, is meant for humans. ERDDAP is a data server that gives you a simple, consistent way to download subsets of gridded and tabular scientific datasets in common file formats and make graphs and maps. ERDDAP can generate maps on the fly so you can check out the data before you proceed to download. Here are some NASA / NOAA / UDEL ERDDAP pages:</p>
<ol style="list-style-type: decimal">
<li><a href="https://upwell.pfeg.noaa.gov/erddap/index.html" class="uri">https://upwell.pfeg.noaa.gov/erddap/index.html</a> - NOAA Global Earth Observation Over 10,000 datasets available here</li>
<li><a href="https://coastwatch.pfeg.noaa.gov/erddap/index.html" class="uri">https://coastwatch.pfeg.noaa.gov/erddap/index.html</a> - NOAA Ocean ERDDAP - over 1400 datasets available here</li>
<li><a href="https://gliders.ioos.us/erddap/index.html" class="uri">https://gliders.ioos.us/erddap/index.html</a> - IOOS Ocean Glider Data - Over 600 datasets here</li>
<li><a href="http://www.neracoos.org/erddap/index.html" class="uri">http://www.neracoos.org/erddap/index.html</a> - NERACOOS Ocean/Met - Over 200 Datasets</li>
<li><a href="http://basin.ceoe.udel.edu/erddap/index.html" class="uri">http://basin.ceoe.udel.edu/erddap/index.html</a> - UDEL Satellite Receiving Station ERDDAP</li>
</ol>
<ul>
<li>Here’s a bigger list - <a href="https://github.com/rmendels/awesome-erddap" class="uri">https://github.com/rmendels/awesome-erddap</a></li>
</ul>
<p>Let’s check out the UDEL Satellite Receiving Station ERDDAP page - here’s what it looks like</p>
<p><img src="../documents/images/basin_erddap.png" width="60%" style="display: block; margin: auto;" /></p>
<p>If we click on <code>GOES-R SST</code>, we see we have some different avenues for data extraction.
<img src="../documents/images/erddap_datasets.png" width="60%" style="display: block; margin: auto;" /></p>
<p>OPeNDAP (Open-source Project for a Network Data Access Protocol) is a great way to subselect the data. Opendap offers html files of the data (BAD IDEA, THIS WILL CRASH YOUR BROWSER) or netCDF files of the data (great idea)</p>
<p><img src="../documents/images/goesSST_erddap.png" width="60%" style="display: block; margin: auto;" /></p>
<p>You can use the Data Access Form at the top of the page to select data and download, or we can streamline this and use R to accomplish this easily. In order to do this, we just need the <code>rerddap</code> package.</p>
<p><code>install.packages("rerddap")</code></p>
<p><code>library("rerddap")</code></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="thredds-and-erddap.html#cb54-1"></a>?rerddap</span></code></pre></div>
<pre><code>## No documentation for &#39;rerddap&#39; in specified packages and libraries:
## you could try &#39;??rerddap&#39;</code></pre>
<ul>
<li>the list of servers <code>rerddap</code> knows about - <code>server()</code></li>
<li>search an <span style="color:red">ERDDAP</span> server for terms - <code>ed_search(query, page = NULL, page_size = NULL, which = "griddap", url = eurl(), ...)</code></li>
<li>get a list of datasets on an <span style="color:red">ERDDAP</span> server - <code>ed_datasets(which = "tabledap", url = eurl())</code></li>
<li>obtain information about a dataset - <code>info(datasetid, url = eurl(), ...)</code></li>
<li>extract data from a griddap dataset - <code>griddap(x, ..., fields = "all", stride = 1, fmt = "nc", url = eurl(), store = disk(), read = TRUE, callopts = list())</code></li>
<li>extract data from a tabledap dataset - <code>tabledap(x, ..., fields = NULL, distinct = FALSE, orderby = NULL, orderbymax = NULL, orderbymin = NULL, orderbyminmax = NULL, units = NULL, url = eurl(), store = disk(), callopts = list())</code></li>
</ul>
<p>Be careful when using the functions <code>ed_search()</code> and <code>ed_datasets()</code>. The default <span style="color:red">ERDDAP</span> has over 9,000 datasets, most of which are grids, so that a list of all the gridded datasets can be quite long. A seemly reasonable search:</p>
<div id="finding-the-data-you-want" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Finding the Data You Want</h3>
<p>The first way to find a dataset is to browse the builtin web page for a particular <span style="color:red">ERDDAP</span> server.
A list of some of the public available <span style="color:red">ERDDAP</span> servers can be obtained from the <code>rerddap</code> command:</p>
<pre><code>servers()
#&gt;                                                                                             name
#&gt; 1                                                          Marine Domain Awareness (MDA) - Italy
#&gt; 2                                                                     Marine Institute - Ireland
#&gt; 3                                                       CoastWatch Caribbean/Gulf of Mexico Node
#&gt; 4                                                                     CoastWatch West Coast Node
#&gt; 5                     NOAA IOOS CeNCOOS (Central and Northern California Ocean Observing System)
#&gt; 6  NOAA IOOS NERACOOS (Northeastern Regional Association of Coastal and Ocean Observing Systems)
#&gt; 7                                         NOAA IOOS NGDAC (National Glider Data Assembly Center)
#&gt; 8    NOAA IOOS PacIOOS (Pacific Islands Ocean Observing System) at the University of Hawaii (UH)
#&gt; 9                     NOAA IOOS SECOORA (Southeast Coastal Ocean Observing Regional Association)
#&gt; 10                            NOAA NCEI (National Centers for Environmental Information) / NCDDC
#&gt; 11                                                NOAA OSMC (Observing System Monitoring Center)
#&gt; 12                                                           NOAA UAF (Unified Access Framework)
#&gt; 13                                                                   ONC (Ocean Networks Canada)
#&gt; 14                    UC Davis BML (University of California at Davis, Bodega Marine Laboratory)
#&gt; 15                                                                            R.Tech Engineering
#&gt; 16                                     French Research Institute for the Exploitation of the Sea
#&gt;                                         url
#&gt; 1  https://bluehub.jrc.ec.europa.eu/erddap/
#&gt; 2           http://erddap.marine.ie/erddap/
#&gt; 3       http://cwcgom.aoml.noaa.gov/erddap/
#&gt; 4  https://coastwatch.pfeg.noaa.gov/erddap/
#&gt; 5     http://erddap.axiomalaska.com/erddap/
#&gt; 6           http://www.neracoos.org/erddap/
#&gt; 7       http://data.ioos.us/gliders/erddap/
#&gt; 8       http://oos.soest.hawaii.edu/erddap/
#&gt; 9            http://129.252.139.124/erddap/
#&gt; 10   http://ecowatch.ncddc.noaa.gov/erddap/
#&gt; 11             http://osmc.noaa.gov/erddap/
#&gt; 12     https://upwell.pfeg.noaa.gov/erddap/
#&gt; 13           http://dap.onc.uvic.ca/erddap/
#&gt; 14    http://bmlsc.ucdavis.edu:8080/erddap/
#&gt; 15            http://meteo.rtech.fr/erddap/
#&gt; 16  http://www.ifremer.fr/erddap/index.html</code></pre>
<p>The second way to find and obtain the desired data is to use functions in <code>rerddap</code>. The basic steps are:</p>
<ol style="list-style-type: decimal">
<li>Find the dataset on an <span style="color:red">ERDDAP</span> server (<code>rerddap::servers()</code>, <code>rerddap::ed_search()</code>, <code>rerddap::ed_datasets()</code> ).</li>
<li>Get the needed information about the dataset (<code>rerddap::info()</code> )</li>
<li>Think about what you are going to do.</li>
<li>Make the request for the data (<code>rerddap::griddap()</code> or <code>rerddap::tabledap()</code> ).</li>
</ol>
<p><code>rerddap::tabledap()</code> - Point datasets, like buoy data or weather station.</p>
<p>Here is an example of this…</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="thredds-and-erddap.html#cb57-1"></a>whichBUOYS &lt;-<span class="st"> </span>rerddap<span class="op">::</span><span class="kw">ed_search</span>(<span class="dt">query =</span> <span class="st">&quot;buoy&quot;</span>)</span></code></pre></div>
<p>NOAA’s National Data Buoy Center (NDBC) collects world-wide data from buoys in the ocean. Let’s browse that dataset by entering this into the R console</p>
<p><code>rerddap::browse('cwwcNDBCMet')</code></p>
<p>That’s the ERDDAP site that we’re going to pull data from…</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="thredds-and-erddap.html#cb58-1"></a><span class="kw">library</span>(rerddap)</span>
<span id="cb58-2"><a href="thredds-and-erddap.html#cb58-2"></a><span class="kw">library</span>(ggplot2)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;ggplot2&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:latticeExtra&#39;:
## 
##     layer</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="thredds-and-erddap.html#cb61-1"></a><span class="kw">library</span>(mapdata)</span></code></pre></div>
<pre><code>## Loading required package: maps</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="thredds-and-erddap.html#cb63-1"></a><span class="kw">info</span>(<span class="st">&#39;cwwcNDBCMet&#39;</span>)</span></code></pre></div>
<pre><code>## &lt;ERDDAP info&gt; cwwcNDBCMet 
##  Base URL: https://upwell.pfeg.noaa.gov/erddap/ 
##  Dataset Type: tabledap 
##  Variables:  
##      apd: 
##          Range: 0.0, 95.0 
##          Units: s 
##      atmp: 
##          Range: -153.4, 50.0 
##          Units: degree_C 
##      bar: 
##          Range: 800.7, 1198.8 
##          Units: hPa 
##      dewp: 
##          Range: -99.9, 48.7 
##          Units: degree_C 
##      dpd: 
##          Range: 0.0, 64.0 
##          Units: s 
##      gst: 
##          Range: 0.0, 75.5 
##          Units: m s-1 
##      latitude: 
##          Range: -55.0, 71.758 
##          Units: degrees_north 
##      longitude: 
##          Range: -177.75, 179.001 
##          Units: degrees_east 
##      mwd: 
##          Range: 0, 359 
##          Units: degrees_true 
##      ptdy: 
##          Range: -14.2, 14.0 
##          Units: hPa 
##      station: 
##      tide: 
##          Range: -9.37, 6.13 
##          Units: m 
##      time: 
##          Range: 4910400.0, 1.6115019E9 
##          Units: seconds since 1970-01-01T00:00:00Z 
##      vis: 
##          Range: 0.0, 66.7 
##          Units: km 
##      wd: 
##          Range: 0, 359 
##          Units: degrees_true 
##      wspd: 
##          Range: 0.0, 96.0 
##          Units: m s-1 
##      wspu: 
##          Range: -98.7, 97.5 
##          Units: m s-1 
##      wspv: 
##          Range: -98.7, 97.5 
##          Units: m s-1 
##      wtmp: 
##          Range: -98.7, 50.0 
##          Units: degree_C 
##      wvht: 
##          Range: 0.0, 92.39 
##          Units: m</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="thredds-and-erddap.html#cb65-1"></a>BuoysInfo &lt;-<span class="st"> </span><span class="kw">info</span>(<span class="st">&#39;cwwcNDBCMet&#39;</span>)</span>
<span id="cb65-2"><a href="thredds-and-erddap.html#cb65-2"></a>locationBuoys &lt;-<span class="st"> </span><span class="kw">tabledap</span>(BuoysInfo, <span class="dt">distinct =</span> <span class="ot">TRUE</span>, <span class="dt">fields =</span> <span class="kw">c</span>(<span class="st">&quot;station&quot;</span>, <span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>), <span class="st">&quot;longitude&gt;=-76&quot;</span>, <span class="st">&quot;longitude&lt;=-74&quot;</span>, <span class="st">&quot;latitude&gt;=38&quot;</span>, <span class="st">&quot;latitude&lt;=40&quot;</span>)</span></code></pre></div>
<pre><code>## info() output passed to x; setting base url to: https://upwell.pfeg.noaa.gov/erddap/</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="thredds-and-erddap.html#cb67-1"></a>locationBuoys =<span class="st"> </span>locationBuoys[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,]</span>
<span id="cb67-2"><a href="thredds-and-erddap.html#cb67-2"></a>locationBuoys<span class="op">$</span>latitude &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(locationBuoys<span class="op">$</span>latitude)</span>
<span id="cb67-3"><a href="thredds-and-erddap.html#cb67-3"></a>locationBuoys<span class="op">$</span>longitude &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(locationBuoys<span class="op">$</span>longitude)</span>
<span id="cb67-4"><a href="thredds-and-erddap.html#cb67-4"></a></span>
<span id="cb67-5"><a href="thredds-and-erddap.html#cb67-5"></a></span>
<span id="cb67-6"><a href="thredds-and-erddap.html#cb67-6"></a>xlim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">76</span>, <span class="dv">-74</span>)</span>
<span id="cb67-7"><a href="thredds-and-erddap.html#cb67-7"></a>ylim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">38</span>, <span class="dv">40</span>)</span>
<span id="cb67-8"><a href="thredds-and-erddap.html#cb67-8"></a>coast &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&quot;worldHires&quot;</span>, <span class="dt">ylim =</span> ylim, <span class="dt">xlim =</span> xlim)</span>
<span id="cb67-9"><a href="thredds-and-erddap.html#cb67-9"></a></span>
<span id="cb67-10"><a href="thredds-and-erddap.html#cb67-10"></a><span class="kw">ggplot</span>() <span class="op">+</span></span>
<span id="cb67-11"><a href="thredds-and-erddap.html#cb67-11"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> locationBuoys, <span class="kw">aes</span>(<span class="dt">x =</span> longitude , <span class="dt">y =</span> latitude, <span class="dt">colour =</span> <span class="kw">factor</span>(station) )) <span class="op">+</span></span>
<span id="cb67-12"><a href="thredds-and-erddap.html#cb67-12"></a><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> coast, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group), <span class="dt">fill =</span> <span class="st">&quot;grey80&quot;</span>) <span class="op">+</span></span>
<span id="cb67-13"><a href="thredds-and-erddap.html#cb67-13"></a><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;latitude&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;longitude&quot;</span>) <span class="op">+</span></span>
<span id="cb67-14"><a href="thredds-and-erddap.html#cb67-14"></a><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="fl">1.3</span>, <span class="dt">xlim =</span> xlim, <span class="dt">ylim =</span> ylim) <span class="op">+</span></span>
<span id="cb67-15"><a href="thredds-and-erddap.html#cb67-15"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Delaware Bay Buoys&quot;</span>)</span></code></pre></div>
<p><img src="DataExtraction_files/figure-html/unnamed-chunk-27-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p><code>rerddap::griddap()</code> - Gridded datasets, like sea surface temperature from GOES-R.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="thredds-and-erddap.html#cb68-1"></a>whichSST &lt;-<span class="st"> </span><span class="kw">ed_search</span>(<span class="dt">query =</span> <span class="st">&quot;SST&quot;</span>)</span></code></pre></div>
<p>returns about 1000 responses. The more focused query:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="thredds-and-erddap.html#cb69-1"></a>whichSST &lt;-<span class="st"> </span><span class="kw">ed_search</span>(<span class="dt">query =</span> <span class="st">&quot;SST MODIS&quot;</span>)</span></code></pre></div>
<p>still returns 172 responses. If the simple search doesn’t narrow things enough, look at the advanced search function <code>ed_search_adv()</code>.</p>
<p>Let’s use this dataset - <a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/jplMURSST41.html" class="uri">https://coastwatch.pfeg.noaa.gov/erddap/griddap/jplMURSST41.html</a></p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="thredds-and-erddap.html#cb70-1"></a><span class="kw">info</span>(<span class="st">&#39;jplMURSST41&#39;</span>)</span></code></pre></div>
<pre><code>## &lt;ERDDAP info&gt; jplMURSST41 
##  Base URL: https://upwell.pfeg.noaa.gov/erddap/ 
##  Dataset Type: griddap 
##  Dimensions (range):  
##      time: (2002-06-01T09:00:00Z, 2021-01-23T09:00:00Z) 
##      latitude: (-89.99, 89.99) 
##      longitude: (-179.99, 180.0) 
##  Variables:  
##      analysed_sst: 
##          Units: degree_C 
##      analysis_error: 
##          Units: degree_C 
##      mask: 
##      sea_ice_fraction: 
##          Units: 1</code></pre>
<p>Alright, let’s extract some of this data and plot it. For this, we can use ‘last’ for the latest time instead of plugging in a time string.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="thredds-and-erddap.html#cb72-1"></a><span class="kw">require</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb72-2"><a href="thredds-and-erddap.html#cb72-2"></a><span class="kw">require</span>(<span class="st">&quot;mapdata&quot;</span>)</span>
<span id="cb72-3"><a href="thredds-and-erddap.html#cb72-3"></a><span class="kw">require</span>(<span class="st">&quot;rerddap&quot;</span>)</span>
<span id="cb72-4"><a href="thredds-and-erddap.html#cb72-4"></a></span>
<span id="cb72-5"><a href="thredds-and-erddap.html#cb72-5"></a><span class="co"># grab the latest MUR SST info</span></span>
<span id="cb72-6"><a href="thredds-and-erddap.html#cb72-6"></a>sstInfo &lt;-<span class="st"> </span><span class="kw">info</span>(<span class="st">&#39;jplMURSST41&#39;</span>)</span>
<span id="cb72-7"><a href="thredds-and-erddap.html#cb72-7"></a><span class="co"># get latest daily sst</span></span>
<span id="cb72-8"><a href="thredds-and-erddap.html#cb72-8"></a>murSST &lt;-<span class="st"> </span><span class="kw">griddap</span>(sstInfo, <span class="dt">latitude =</span> <span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">45</span>), <span class="dt">longitude =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">80.</span>, <span class="dv">-70</span>), <span class="dt">time =</span> <span class="kw">c</span>(<span class="st">&#39;last&#39;</span>,<span class="st">&#39;last&#39;</span>), <span class="dt">fields =</span> <span class="st">&#39;analysed_sst&#39;</span>)</span></code></pre></div>
<pre><code>## info() output passed to x; setting base url to: https://upwell.pfeg.noaa.gov/erddap/</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="thredds-and-erddap.html#cb74-1"></a>mycolor &lt;-<span class="st"> </span>colors<span class="op">$</span>temperature</span>
<span id="cb74-2"><a href="thredds-and-erddap.html#cb74-2"></a></span>
<span id="cb74-3"><a href="thredds-and-erddap.html#cb74-3"></a>w &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&quot;worldHires&quot;</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">45</span>), <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">80.</span>, <span class="dv">-70</span>))</span>
<span id="cb74-4"><a href="thredds-and-erddap.html#cb74-4"></a></span>
<span id="cb74-5"><a href="thredds-and-erddap.html#cb74-5"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> murSST<span class="op">$</span>data, <span class="kw">aes</span>(<span class="dt">x =</span> lon, <span class="dt">y =</span> lat, <span class="dt">fill =</span> analysed_sst)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb74-6"><a href="thredds-and-erddap.html#cb74-6"></a><span class="st">    </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> w, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group), <span class="dt">fill =</span> <span class="st">&quot;grey80&quot;</span>) <span class="op">+</span></span>
<span id="cb74-7"><a href="thredds-and-erddap.html#cb74-7"></a><span class="st">    </span><span class="kw">geom_raster</span>(<span class="dt">interpolate =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb74-8"><a href="thredds-and-erddap.html#cb74-8"></a><span class="st">    </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colours =</span> mycolor, <span class="dt">na.value =</span> <span class="ot">NA</span>) <span class="op">+</span></span>
<span id="cb74-9"><a href="thredds-and-erddap.html#cb74-9"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;latitude&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;longitude&quot;</span>) <span class="op">+</span></span>
<span id="cb74-10"><a href="thredds-and-erddap.html#cb74-10"></a><span class="st">    </span><span class="kw">coord_fixed</span>(<span class="fl">1.3</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">80</span>, <span class="dv">-70</span>),  <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">45</span>)) <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Latest MUR SST&quot;</span>)</span></code></pre></div>
<p><img src="DataExtraction_files/figure-html/unnamed-chunk-31-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>What if we want to use a custom URL that’s not pre-loaded into <code>rerddap</code> ? Let’s use Ireland’s Marine Institute ERDDAP. Follow these steps:</p>
<ol style="list-style-type: decimal">
<li>Go to <a href="http://erddap.marine.ie/erddap/" class="uri">http://erddap.marine.ie/erddap/</a> and select datasets</li>
<li>Look to the far right column named Dataset ID</li>
<li>Locate this ID - <code>IMI_NEATL</code></li>
<li>Select Graph under ‘Make a Graph’ Column for that Dataset ID</li>
<li>Look at the variables - see <code>sea_surface_temperature</code></li>
</ol>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="thredds-and-erddap.html#cb75-1"></a>urlBase &lt;-<span class="st"> &quot;http://erddap.marine.ie/erddap/&quot;</span></span>
<span id="cb75-2"><a href="thredds-and-erddap.html#cb75-2"></a>parameter &lt;-<span class="st"> &quot;sea_surface_temperature&quot;</span></span>
<span id="cb75-3"><a href="thredds-and-erddap.html#cb75-3"></a>sstTimes &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;last&quot;</span>, <span class="st">&quot;last&quot;</span>)</span>
<span id="cb75-4"><a href="thredds-and-erddap.html#cb75-4"></a>sstLats &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">48.00625</span>, <span class="fl">57.50625</span>)</span>
<span id="cb75-5"><a href="thredds-and-erddap.html#cb75-5"></a>sstLons &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="fl">17.99375</span>, <span class="fl">-1.00625</span>)</span>
<span id="cb75-6"><a href="thredds-and-erddap.html#cb75-6"></a></span>
<span id="cb75-7"><a href="thredds-and-erddap.html#cb75-7"></a>xlim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="fl">17.99375</span>, <span class="fl">-1.00625</span>)</span>
<span id="cb75-8"><a href="thredds-and-erddap.html#cb75-8"></a>ylim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">48.00625</span>, <span class="fl">57.50625</span>)</span>
<span id="cb75-9"><a href="thredds-and-erddap.html#cb75-9"></a></span>
<span id="cb75-10"><a href="thredds-and-erddap.html#cb75-10"></a>dataInfo &lt;-<span class="st"> </span>rerddap<span class="op">::</span><span class="kw">info</span>(<span class="st">&quot;IMI_NEATL&quot;</span>, <span class="dt">url =</span> urlBase)</span>
<span id="cb75-11"><a href="thredds-and-erddap.html#cb75-11"></a>NAtlsst &lt;-<span class="st"> </span><span class="kw">griddap</span>(dataInfo, <span class="dt">longitude =</span> sstLons, <span class="dt">latitude =</span> sstLats, <span class="dt">time =</span> sstTimes, <span class="dt">fields =</span> parameter, <span class="dt">url =</span> urlBase)</span></code></pre></div>
<pre><code>## info() output passed to x; setting base url to: http://erddap.marine.ie/erddap/</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="thredds-and-erddap.html#cb77-1"></a><span class="kw">str</span>(NAtlsst<span class="op">$</span>data)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    1034960 obs. of  4 variables:
##  $ time                   : chr  &quot;2021-01-25T00:00:00Z&quot; &quot;2021-01-25T00:00:00Z&quot; &quot;2021-01-25T00:00:00Z&quot; &quot;2021-01-25T00:00:00Z&quot; ...
##  $ lat                    : num  48 48 48 48 48 ...
##  $ lon                    : num  -18 -18 -18 -18 -17.9 ...
##  $ sea_surface_temperature: num  11.9 11.9 11.9 11.9 12.5 ...</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="thredds-and-erddap.html#cb79-1"></a>my.col &lt;-<span class="st"> </span>colors<span class="op">$</span>temperature </span>
<span id="cb79-2"><a href="thredds-and-erddap.html#cb79-2"></a>w &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&quot;worldHires&quot;</span>, <span class="dt">ylim =</span> ylim, <span class="dt">xlim =</span> xlim)</span>
<span id="cb79-3"><a href="thredds-and-erddap.html#cb79-3"></a>myplot &lt;-<span class="st"> </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb79-4"><a href="thredds-and-erddap.html#cb79-4"></a><span class="st">    </span><span class="kw">geom_raster</span>(<span class="dt">data =</span> NAtlsst<span class="op">$</span>data, <span class="kw">aes</span>(<span class="dt">x =</span> lon, <span class="dt">y =</span> lat, <span class="dt">fill =</span> sea_surface_temperature), <span class="dt">interpolate =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb79-5"><a href="thredds-and-erddap.html#cb79-5"></a><span class="st">    </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> w, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group), <span class="dt">fill =</span> <span class="st">&quot;grey80&quot;</span>) <span class="op">+</span></span>
<span id="cb79-6"><a href="thredds-and-erddap.html#cb79-6"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colours =</span> my.col, <span class="dt">na.value =</span> <span class="ot">NA</span>, <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">15</span>), <span class="dt">name =</span> <span class="st">&quot;Temperature&quot;</span>) <span class="op">+</span></span>
<span id="cb79-7"><a href="thredds-and-erddap.html#cb79-7"></a><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;latitude&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;longitude&quot;</span>) <span class="op">+</span></span>
<span id="cb79-8"><a href="thredds-and-erddap.html#cb79-8"></a><span class="st">    </span><span class="kw">coord_fixed</span>(<span class="fl">1.3</span>, <span class="dt">xlim =</span> xlim, <span class="dt">ylim =</span> ylim, <span class="dt">expand=</span><span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb79-9"><a href="thredds-and-erddap.html#cb79-9"></a><span class="st">    </span><span class="kw">ggtitle</span>(<span class="kw">paste</span>(<span class="st">&quot;temperture&quot;</span>, NAtlsst<span class="op">$</span>data<span class="op">$</span>time[<span class="dv">1</span>]))</span>
<span id="cb79-10"><a href="thredds-and-erddap.html#cb79-10"></a>myplot</span></code></pre></div>
<p><img src="DataExtraction_files/figure-html/unnamed-chunk-32-1.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="week-6-assignment-extract-data-in-r-via-thredds-and-erddap.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

</body>

</html>
